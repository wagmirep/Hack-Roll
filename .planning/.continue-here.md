---
project: lahstats-production
milestone: Portfolio Demo Deployment
status: in_progress
last_updated: 2026-01-23
---

<current_state>
Implementing production portfolio demo with AFK autonomous development capability.

Three workstreams defined:
- **Workstream A: Telegram Notification Service** — In progress (code complete, needs deploy)
- **Workstream B: HuggingFace Model Hosting** — Not started
- **Workstream C: Production Deployment** — Not started

Currently paused at: User doing Telegram setup, then deploy of claude-notify worker.
</current_state>

<completed_work>

## This Session

1. **Design document created** — `docs/plans/2026-01-23-production-portfolio-design.md`
   - Full architecture for Telegram notifications, HF hosting, production deployment
   - Approved by user

2. **claude-notify repo created** — `C:\Users\nicko\Desktop\claude-notify`
   - Cloudflare Worker fully implemented (src/index.ts, src/telegram.ts, src/types.ts)
   - CLI script created (scripts/claude-notify)
   - TypeScript compiles cleanly
   - Committed: `623b497`

3. **STATE.md reconstructed** for this project

## Previously Complete (v1.0 + Phase 5 partial)

- v1.0 ML Pipeline complete (Phases 1-4)
- Phase 5 Plan 05-01 complete (Background Chunk Transcription)
- Phase 5 Plan 05-02 not yet executed (Fast Post-Processing)
</completed_work>

<remaining_work>

## Immediate (Workstream A completion)

User needs to do manually:
1. Create Telegram bot via @BotFather → get token
2. Create Telegram group with Topics enabled
3. Add bot as admin
4. Get chat ID via `getUpdates` API
5. Create KV namespace: `npx wrangler kv:namespace create NOTIFY_KV`
6. Set secrets via wrangler
7. Deploy: `npm run deploy`
8. Set Telegram webhook

## After Telegram Setup

- Test claude-notify end-to-end
- Workstream B: HuggingFace Inference Endpoints
  - Deploy MERaLiON-2-3B
  - Deploy pyannote diarization
  - Update backend to call HF endpoints
  - Add rate limiting (5/day, 60s max)
- Workstream C: Production Deployment
  - Deploy backend to Railway/Fly.io
  - Deploy mobile as Expo Web
  - End-to-end test

## Also Pending

- Phase 5 Plan 05-02 (Fast Post-Processing) — batched transcription optimization
</remaining_work>

<decisions_made>

1. **Telegram for notifications** — Rich API, inline buttons, topics for threading, mobile-first
2. **Cloudflare Workers** — Free tier sufficient, global edge, simple deployment
3. **HTTP webhook over MCP** — Simpler, works from any Claude instance via curl
4. **Thread-per-project** — Clean organization in one Telegram group
5. **Shared secret auth** — Simple for personal use
6. **Scale-to-zero for HF** — Accept 30-60s cold start to save cost
7. **Rate limits** — 5 recordings/day, 60s max per recording
8. **Wait indefinitely** — Blocking questions wait until user responds
9. **Full notifications** — Blocking + milestones + errors + heartbeats
</decisions_made>

<blockers>
None — just waiting on user to complete Telegram setup.
</blockers>

<context>
The goal is to transform LahStats from hackathon MVP to portfolio demo that recruiters can access.

User wants to run this AFK using ralph wiggum loop + agent-browser CLI. The Telegram notification service is prerequisite for that — Claude needs a way to contact user during autonomous work.

The notification service is in a SEPARATE REPO: `C:\Users\nicko\Desktop\claude-notify`
This is intentional — it's reusable across all projects.

Once Telegram is working, user can go AFK while Claude handles:
- HuggingFace model deployment
- Backend production deployment
- Rate limiting implementation
- Mobile web build
</context>

<next_action>
When user returns:
1. Ask if Telegram setup is complete
2. If yes, test claude-notify with a real notification
3. If working, proceed to Workstream B (HuggingFace) or Workstream C (deploy) in parallel
4. User can then go AFK with ralph wiggum loop

Commands for user reference:
```bash
# Test claude-notify locally
cd C:\Users\nicko\Desktop\claude-notify
npm run dev

# Deploy
npm run deploy

# Test after deploy
export CLAUDE_NOTIFY_URL="https://claude-notify.<subdomain>.workers.dev"
export CLAUDE_NOTIFY_SECRET="your-secret"
export CLAUDE_PROJECT="test"
./scripts/claude-notify milestone "Test notification"
```
</next_action>

<related_files>

## Design
- `docs/plans/2026-01-23-production-portfolio-design.md` — Full design doc

## claude-notify (separate repo)
- `C:\Users\nicko\Desktop\claude-notify\src\index.ts` — Main worker
- `C:\Users\nicko\Desktop\claude-notify\src\telegram.ts` — Telegram helpers
- `C:\Users\nicko\Desktop\claude-notify\scripts\claude-notify` — CLI script
- `C:\Users\nicko\Desktop\claude-notify\README.md` — Setup instructions

## LahStats Planning
- `.planning/PROJECT.md` — Project context
- `.planning/ROADMAP.md` — Roadmap (v1.1 in progress)
- `.planning/STATE.md` — Current state
- `.planning/phases/05-batched-transcription/05-02-PLAN.md` — Pending optimization work
</related_files>
